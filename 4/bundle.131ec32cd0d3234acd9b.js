(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,n="beforeend"){t.insertAdjacentElement(n,e.element)}const n=["taxi","bus","train","ship","drive","flight","check-in","sightseeing","restaurant"];class i{#e=null;#t=null;#n=null;#i=null;constructor(e,t,n){this.#t=e,this.#n=t,this.#i=n}get template(){return function(e={},t=[],i=[]){const{type:s="flight",destination:l,basePrice:r="",dateFrom:o=new Date,dateTo:a=new Date,offers:d=[]}=e,p=t.find((e=>e.id===l)),c=i.find((e=>e.type===s))?.offers||[];return`\n    <form class="event event--edit" action="#" method="post">\n      <header class="event__header">\n        <div class="event__type-wrapper">\n          <label class="event__type event__type-btn" for="event-type-toggle-1">\n            <span class="visually-hidden">Choose event type</span>\n            <img class="event__type-icon" width="17" height="17" src="img/icons/${s}.png" alt="Event type icon">\n          </label>\n          <input class="event__type-toggle visually-hidden" id="event-type-toggle-1" type="checkbox">\n\n          <div class="event__type-list">\n            <fieldset class="event__type-group">\n              <legend class="visually-hidden">Event type</legend>\n              ${n.map((e=>`\n    <div class="event__type-item">\n      <input\n        id="event-type-${e}-1"\n        class="event__type-input visually-hidden"\n        type="radio"\n        name="event-type"\n        value="${e}"\n        ${void 0===e?"checked":""}\n      >\n      <label\n        class="event__type-label event__type-label--${e}"\n        for="event-type-${e}-1"\n      >\n        ${e.charAt(0).toUpperCase()+e.slice(1)}\n      </label>\n    </div>\n  `)).join("")}\n            </fieldset>\n          </div>\n        </div>\n\n        <div class="event__field-group event__field-group--destination">\n          <label class="event__label event__type-output" for="event-destination-1">\n            ${s}\n          </label>\n          <input\n            class="event__input event__input--destination"\n            id="event-destination-1"\n            type="text"\n            name="event-destination"\n            value="${p?p.name:""}"\n            list="destination-list-1"\n          >\n          <datalist id="destination-list-1">\n            ${function(e){return e.map((e=>`\n    <option value="${e.name}"></option>\n  `)).join("")}(t)}\n          </datalist>\n        </div>\n\n        <div class="event__field-group event__field-group--time">\n          <label class="visually-hidden" for="event-start-time-1">From</label>\n          <input\n            class="event__input event__input--time"\n            id="event-start-time-1"\n            type="text"\n            name="event-start-time"\n            value="${o}"\n          >\n          &mdash;\n          <label class="visually-hidden" for="event-end-time-1">To</label>\n          <input\n            class="event__input event__input--time"\n            id="event-end-time-1"\n            type="text"\n            name="event-end-time"\n            value="${a}"\n          >\n        </div>\n\n        <div class="event__field-group event__field-group--price">\n          <label class="event__label" for="event-price-1">\n            <span class="visually-hidden">Price</span>\n            &euro;\n          </label>\n          <input\n            class="event__input event__input--price"\n            id="event-price-1"\n            type="text"\n            name="event-price"\n            value="${r}"\n          >\n        </div>\n\n        <button class="event__save-btn btn btn--blue" type="submit">Save</button>\n        <button class="event__reset-btn" type="reset">Delete</button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </header>\n      <section class="event__details">\n        ${function(e,t=[]){return e.length?`\n    <section class="event__section  event__section--offers">\n      <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n      <div class="event__available-offers">\n        ${e.map((e=>`\n          <div class="event__offer-selector">\n            <input\n              class="event__offer-checkbox visually-hidden"\n              id="event-offer-${e.id}"\n              type="checkbox"\n              name="event-offer-${e.id}"\n              ${t.includes(e.id)?"checked":""}\n            >\n            <label class="event__offer-label" for="event-offer-${e.id}">\n              <span class="event__offer-title">${e.title}</span>\n              &plus;&euro;&nbsp;\n              <span class="event__offer-price">${e.price}</span>\n            </label>\n          </div>\n        `)).join("")}\n      </div>\n    </section>\n  `:""}(c,d)}\n        ${function(e){return e?`\n    <section class="event__section  event__section--destination">\n      <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n      <p class="event__destination-description">${e.description}</p>\n      ${e.pictures.length?`\n        <div class="event__photos-container">\n          <div class="event__photos-tape">\n            ${e.pictures.map((e=>`\n              <img class="event__photo" src="${e.src}" alt="${e.description}">\n            `)).join("")}\n          </div>\n        </div>\n      `:""}\n    </section>\n  `:""}(p)}\n      </section>\n    </form>\n  `}(this.#t,this.#n,this.#i)}get element(){return this.#e||(this.#e=e(this.template)),this.#e}removeElement(){this.#e=null}}class s{#e=null;get template(){return'<ul class="trip-events__list"></ul>'}get element(){return this.#e||(this.#e=e(this.template)),this.#e}removeElement(){this.#e=null}}function l(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}class r{#e=null;#t=null;#n=null;#i=null;constructor(e,t,n){this.#t=e,this.#n=t,this.#i=n}get template(){return function(e,t,n){const i=t.find((t=>t.id===e.destination));return`\n    <li class="trip-events__item">\n      <div class="event">\n        <time class="event__date" datetime="${e.dateFrom}">${function(e){const t=new Date(e);return`${t.toLocaleString("en-US",{month:"short"}).toUpperCase()} ${t.getDate().toString().padStart(2,"0")}`}(e.dateFrom)}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${e.type}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${e.type} ${i?i.name:""}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${e.dateFrom}">${l(e.dateFrom)}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${e.dateTo}">${l(e.dateTo)}</time>\n          </p>\n          <p class="event__duration">${function(e,t){const n=new Date(e),i=new Date(t)-n,s=Math.floor(i/1e3/60),l=Math.floor(s/60),r=Math.floor(l/24);return r>0?`${r}D ${l%24}H ${s%60}M`:l>0?`${l}H ${s%60}M`:`${s}M`}(e.dateFrom,e.dateTo)}</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${e.basePrice}</span>\n        </p>\n        <h4 class="visually-hidden">Offers:</h4>\n        <ul class="event__selected-offers">\n          ${function(e,t){return(t.find((t=>t.type===e.type))?.offers||[]).filter((t=>e.offers.includes(t.id))).map((e=>`\n    <li class="event__offer">\n      <span class="event__offer-title">${e.title}</span>\n      &plus;&euro;&nbsp;\n      <span class="event__offer-price">${e.price}</span>\n    </li>\n  `)).join("")}(e,n)}\n        </ul>\n        <button class="event__favorite-btn ${e.isFavorite?"event__favorite-btn--active":""}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </div>\n    </li>\n  `}(this.#t,this.#n,this.#i)}get element(){return this.#e||(this.#e=e(this.template)),this.#e}removeElement(){this.#e=null}}class o{#e=null;get element(){return this.#e||(this.#e=e(this.getTemplate())),this.#e}getTemplate(){return'<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n            <div class="trip-sort__item  trip-sort__item--day">\n              <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day" checked>\n              <label class="trip-sort__btn" for="sort-day">Day</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--event">\n              <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n              <label class="trip-sort__btn" for="sort-event">Event</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--time">\n              <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n              <label class="trip-sort__btn" for="sort-time">Time</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--price">\n              <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price">\n              <label class="trip-sort__btn" for="sort-price">Price</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--offer">\n              <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n              <label class="trip-sort__btn" for="sort-offer">Offers</label>\n            </div>\n          </form>'}removeElement(){this.#e=null}}const a={destinations:[{id:"1",description:"Moscow uwu.",name:"Moscow",pictures:[{src:"https://loremflickr.com/248/152?random=1",description:"Moscow parliament building"},{src:"https://loremflickr.com/248/152?random=2",description:"Moscow street market"},{src:"https://loremflickr.com/248/152?random=3",description:"Moscow park"}]},{id:"2",description:"Chamonix, is a beautiful city, a true asian pearl, with crowded streets.",name:"Chamonix",pictures:[{src:"https://loremflickr.com/248/152?random=1",description:"Chamonix parliament building"}]},{id:"3",description:"Amsterdam is a cozy and clean city",name:"Amsterdam",pictures:[{src:"https://loremflickr.com/248/152?random=4",description:"Amsterdam canal"},{src:"https://loremflickr.com/248/152?random=5",description:"Amsterdam architecture"}]},{id:"4",description:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",name:"Geneva",pictures:[{src:"https://loremflickr.com/248/152?random=6",description:"Geneva lake"},{src:"https://loremflickr.com/248/152?random=7",description:"Geneva downtown"},{src:"https://loremflickr.com/248/152?random=8",description:"Geneva park"}]}],offers:[{type:"taxi",offers:[{id:"1",title:"Upgrade to a comfort class",price:200},{id:"2",title:"Order a meal",price:100}]},{type:"bus",offers:[{id:"1",title:"Choose seats",price:50},{id:"2",title:"Upgrade to business class",price:120}]},{type:"ship",offers:[{id:"1",title:"Add breakfast",price:100},{id:"2",title:"Add dinner",price:150}]},{type:"train",offers:[{id:"1",title:"Book a cabin",price:200}]},{type:"flight",offers:[{id:"1",title:"Add luggage",price:50},{id:"2",title:"Choose seats",price:70}]},{type:"check-in",offers:[{id:"1",title:"Early check-in",price:150}]},{type:"sightseeing",offers:[{id:"1",title:"Book a guide",price:100}]},{type:"restaurant",offers:[{id:"1",title:"Reserve VIP table",price:200}]},{type:"drive",offers:[{id:"1",title:"Rent a car",price:300}]}],trips:[{id:"1",basePrice:1100,dateFrom:"2024-01-10T22:55:56.845Z",dateTo:"2024-01-11T11:22:13.375Z",destination:"1",isFavorite:!1,offers:["1"],type:"taxi"},{id:"2",basePrice:1600,dateFrom:"2024-01-12T10:55:56.845Z",dateTo:"2024-01-13T12:22:15.375Z",destination:"2",isFavorite:!0,offers:["2"],type:"bus"},{id:"3",basePrice:2100,dateFrom:"2024-01-14T16:05:56.845Z",dateTo:"2024-01-15T19:44:13.375Z",destination:"3",isFavorite:!1,offers:["1","2"],type:"ship"}]};console.log("Mock Service:",a);const d=document.querySelector(".trip-main"),p=d.querySelector(".trip-controls__filters"),c=document.querySelector(".trip-events"),f=new class{constructor(e){this.destinations=e.destinations}getById(e){return this.destinations.find((t=>t.id===e))}}(a),v=new class{constructor(e){this.offers=e.offers}getOffersByType(e){return this.offers.find((t=>t.type===e))?.offers}}(a),u=new class{constructor(e){this.trips=e.trips}getRandomTrip(){return(e=this.trips)[Math.floor(Math.random()*e.length)];var e}}(a);console.log("Models:",{destinations:f.destinations,offers:v.offers,trips:u.trips});const m=new class{#s=new s;#l=null;#r=null;#o=null;#a=null;constructor({container:e,destinationsModel:t,offersModel:n,tripsModel:i}){this.#l=e,this.#r=t,this.#o=n,this.#a=i}init(){const e=this.#a.trips,n=this.#r.destinations,s=this.#o.offers;console.log("BoardPresenter init:",{points:e,destinations:n,offers:s}),t(new o,this.#l),t(this.#s,this.#l),e.length>0&&(console.log("Rendering first point:",e[0]),t(new i(e[0],n,s),this.#s.element));for(let i=1;i<e.length;i++)console.log("Rendering point:",e[i]),t(new r(e[i],n,s),this.#s.element)}}({container:c,destinationsModel:f,offersModel:v,tripsModel:u});t(new class{#e=null;get element(){return this.#e||(this.#e=e(this.getTemplate())),this.#e}getTemplate(){return'<form class="trip-filters" action="#" method="get">\n    <div class="trip-filters__filter">\n      <input id="filter-everything" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="everything" checked>\n      <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-future" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="future">\n      <label class="trip-filters__filter-label" for="filter-future">Future</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-present" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="present">\n      <label class="trip-filters__filter-label" for="filter-present">Present</label>\n    </div>\n\n    <div class="trip-filters__filter">\n      <input id="filter-past" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="past">\n      <label class="trip-filters__filter-label" for="filter-past">Past</label>\n    </div>\n    <button class="visually-hidden" type="submit">Accept filter</button>\n  </form>'}removeElement(){this.#e=null}},p),t(new class{#e=null;get element(){return this.#e||(this.#e=e(this.getTemplate())),this.#e}getTemplate(){return'\n  <button class="trip-main__event-add-btn  btn  btn--big  btn--yellow" type="button">New event</button>\n'}removeElement(){this.#e=null}},d),m.init()})();
//# sourceMappingURL=bundle.131ec32cd0d3234acd9b.js.map